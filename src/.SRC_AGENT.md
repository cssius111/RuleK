# ğŸ® æºä»£ç Agent - æ ¸å¿ƒä»£ç è§„åˆ™

## ç»§æ‰¿ä¸»Agentè§„åˆ™
å¿…é¡»å…ˆè¯»å– `/MAIN_AGENT.md`

## æºä»£ç ç‰¹å®šè§„åˆ™

### ç›®å½•ç»“æ„
```
src/
â”œâ”€â”€ core/           # æ¸¸æˆæ ¸å¿ƒé€»è¾‘
â”‚   â”œâ”€â”€ game_engine.py
â”‚   â”œâ”€â”€ game_state.py
â”‚   â””â”€â”€ rules.py
â”œâ”€â”€ ai/             # AIé›†æˆ
â”‚   â”œâ”€â”€ deepseek_client.py
â”‚   â””â”€â”€ turn_pipeline.py
â”œâ”€â”€ api/            # APIæ¥å£
â”‚   â”œâ”€â”€ schemas.py
â”‚   â””â”€â”€ prompts.py
â”œâ”€â”€ models/         # æ•°æ®æ¨¡å‹
â”œâ”€â”€ managers/       # ç®¡ç†å™¨
â””â”€â”€ utils/          # å·¥å…·å‡½æ•°
```

### æ ¸å¿ƒä»£ç æ“ä½œè§„åˆ™

#### 1. ä¿®æ”¹æ ¸å¿ƒæ¨¡å—
```python
# âœ… æ­£ç¡® - è°¨æ…ä¿®æ”¹
1. å¤‡ä»½: read_file("src/core/game_engine.py")
2. æµ‹è¯•: ç¡®ä¿æœ‰å¯¹åº”æµ‹è¯•
3. ä¿®æ”¹: edit_file("src/core/game_engine.py", minimal_changes)

# âŒ é”™è¯¯
- åˆ›å»º game_engine_new.py
- å¤§è§„æ¨¡é‡å†™ï¼ˆåº”è¯¥æ¸è¿›å¼é‡æ„ï¼‰
```

#### 2. æ¨¡å—èŒè´£åˆ’åˆ†
```python
# core/ - çº¯æ¸¸æˆé€»è¾‘ï¼Œä¸ä¾èµ–å¤–éƒ¨
class GameEngine:     # æ¸¸æˆå¼•æ“
class GameState:      # æ¸¸æˆçŠ¶æ€
class Rule:          # è§„åˆ™ç³»ç»Ÿ

# ai/ - AIç›¸å…³ï¼Œå¯é€‰åŠŸèƒ½
class AIClient:      # AIå®¢æˆ·ç«¯
class TurnPipeline:  # å›åˆå¤„ç†

# api/ - å¯¹å¤–æ¥å£
class GameSchema:    # æ•°æ®æ¨¡å¼
class Prompts:       # AIæç¤ºè¯
```

#### 3. ä¾èµ–åŸåˆ™
```python
# âœ… æ­£ç¡®ä¾èµ–æ–¹å‘
api -> ai -> core
web -> api -> core

# âŒ é”™è¯¯ä¾èµ–
core -> web  # æ ¸å¿ƒä¸ä¾èµ–Web
core -> ai   # æ ¸å¿ƒä¸ä¾èµ–AI
```

### ä»£ç è§„èŒƒ

#### å‘½åè§„èŒƒ
```python
# ç±»åï¼šPascalCase
class GameEngine:
class RuleManager:

# å‡½æ•°åï¼šsnake_case
def create_rule():
def validate_action():

# å¸¸é‡ï¼šUPPER_CASE
MAX_PLAYERS = 10
DEFAULT_FEAR = 50

# ç§æœ‰æˆå‘˜ï¼šå‰ç¼€ä¸‹åˆ’çº¿
def _internal_method():
self._private_var = None
```

#### ç±»å‹æ³¨è§£
```python
# âœ… ä½¿ç”¨ç±»å‹æ³¨è§£
def create_rule(content: str, rule_type: RuleType) -> Rule:
    pass

# âŒ ä¸è¦çœç•¥ç±»å‹
def create_rule(content, rule_type):  # ç¼ºå°‘ç±»å‹
    pass
```

### ç¦æ­¢æ“ä½œ
- âŒ åˆ›å»º `game2.py`ï¼ˆä¿®æ”¹åŸæ–‡ä»¶ï¼‰
- âŒ åˆ›å»º `core_enhanced/`ï¼ˆä¿®æ”¹åŸç›®å½•ï¼‰
- âŒ å¾ªç¯ä¾èµ–ï¼ˆä¿æŒå•å‘ä¾èµ–ï¼‰
- âŒ åœ¨coreä¸­å¯¼å…¥webæ¨¡å—