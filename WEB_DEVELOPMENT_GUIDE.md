# RuleK Web UI å¼€å‘æŒ‡å—

## ğŸ¯ é¡¹ç›®ç›®æ ‡

å°†RuleKä»CLIæ¸¸æˆè½¬å˜ä¸ºç°ä»£åŒ–çš„Webåº”ç”¨ï¼Œå®ç°ï¼š
- 100% åŠŸèƒ½è¦†ç›–
- AIæ ¸å¿ƒåŒ–é›†æˆ
- å®æ—¶äº¤äº’ä½“éªŒ
- å“åº”å¼è®¾è®¡

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡
```bash
# å®‰è£…ä¾èµ–
npm run setup

# å®‰è£…Playwrightæµè§ˆå™¨
npm run setup:playwright

# éªŒè¯ç¯å¢ƒ
npm run test:phase0
```

### 2. å¯åŠ¨å¼€å‘
```bash
# å¯åŠ¨å‰åç«¯
npm start

# æˆ–åˆ†åˆ«å¯åŠ¨
npm run backend  # åç«¯ http://localhost:8000
npm run dev      # å‰ç«¯ http://localhost:3000
```

### 3. è¿è¡Œæµ‹è¯•
```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm test

# è¿è¡Œç‰¹å®šé˜¶æ®µæµ‹è¯•
npm run test:phase1

# è°ƒè¯•æ¨¡å¼
npm run test:debug
```

## ğŸ“Š å¼€å‘é˜¶æ®µä¸æˆåŠŸæ ‡å‡†

### Phase 0: ç¯å¢ƒå‡†å¤‡ (Day 1)
**æˆåŠŸæ ‡å‡†:**
- âœ… å¼€å‘æœåŠ¡å™¨å¯è®¿é—®
- âœ… APIæœåŠ¡å™¨å¯è®¿é—®
- âœ… WebSocketè¿æ¥æ­£å¸¸

**éªŒè¯å‘½ä»¤:**
```bash
npm run test:phase0
npm run track:phase0
npm run report:phase0
```

### Phase 1: åŸºç¡€æ¡†æ¶ (Day 2-3)
**æˆåŠŸæ ‡å‡†:**
- âœ… è·¯ç”±ç³»ç»Ÿå·¥ä½œ
- âœ… çŠ¶æ€ç®¡ç†å°±ç»ª
- âœ… å“åº”å¼å¸ƒå±€

**å…³é”®æ–‡ä»¶:**
- `web/frontend/src/router/index.ts`
- `web/frontend/src/stores/game.ts`
- `web/frontend/src/App.vue`

### Phase 2: æ¸¸æˆåˆ›å»ºæµç¨‹ (Day 4-5)
**æˆåŠŸæ ‡å‡†:**
- âœ… æ–°æ¸¸æˆåˆ›å»º
- âœ… å­˜æ¡£åŠ è½½
- âœ… å‚æ•°éªŒè¯

**å…³é”®åŠŸèƒ½:**
- æ¸¸æˆé…ç½®è¡¨å•
- å­˜æ¡£åˆ—è¡¨å±•ç¤º
- APIé›†æˆ

### Phase 3: æ¸¸æˆæ ¸å¿ƒç•Œé¢ (Day 6-8)
**æˆåŠŸæ ‡å‡†:**
- âœ… æ¸¸æˆä¸»ç•Œé¢å®Œæˆ
- âœ… å›åˆæ¨è¿›æ­£å¸¸
- âœ… WebSocketå®æ—¶æ›´æ–°

**å…³é”®ç»„ä»¶:**
- `GameDashboard.vue`
- `StatusBar.vue`
- `EventLog.vue`

### Phase 4: è§„åˆ™ç®¡ç†ç³»ç»Ÿ (Day 9-11)
**æˆåŠŸæ ‡å‡†:**
- âœ… è§„åˆ™åˆ›å»ºå‘å¯¼
- âœ… AIè§£æåŠŸèƒ½
- âœ… æ¨¡æ¿ç³»ç»Ÿ

### Phase 5: NPCå’ŒAIç³»ç»Ÿ (Day 12-14)
**æˆåŠŸæ ‡å‡†:**
- âœ… NPCçŠ¶æ€å±•ç¤º
- âœ… AIå¯¹è¯ç”Ÿæˆ
- âœ… æµå¼å†…å®¹æ¨é€

### Phase 6: ä¼˜åŒ–å’Œå®Œå–„ (Day 15-16)
**æˆåŠŸæ ‡å‡†:**
- âœ… æ€§èƒ½è¾¾æ ‡ (Lighthouse > 90)
- âœ… æµ‹è¯•è¦†ç›–ç‡ > 80%
- âœ… 0å…³é”®bug

## ğŸ§ª æµ‹è¯•ç­–ç•¥

### å•å…ƒæµ‹è¯•
```bash
npm run test:unit
npm run coverage
```

### E2Eæµ‹è¯•
```bash
# æ— å¤´æ¨¡å¼
npm run test:e2e

# æœ‰å¤´æ¨¡å¼ï¼ˆå¯è§†åŒ–ï¼‰
npm run test:headed

# è°ƒè¯•æ¨¡å¼
npm run test:debug
```

### æ€§èƒ½æµ‹è¯•
```bash
# Lighthouseæµ‹è¯•
npx lighthouse http://localhost:3000

# æŸ¥çœ‹æŠ¥å‘Š
npm run report
```

## ğŸ“ˆ è¿›åº¦è¿½è¸ª

### æ£€æŸ¥å½“å‰é˜¶æ®µ
```bash
# è¿è¡Œé˜¶æ®µæµ‹è¯•å¹¶ç”ŸæˆæŠ¥å‘Š
npm run track:phase<n>

# ä¾‹å¦‚ï¼ŒPhase 1:
npm run track:phase1
```

### ç”Ÿæˆè¿›åº¦æŠ¥å‘Š
```bash
# ç”Ÿæˆè¯¦ç»†æŠ¥å‘Š
npm run report:phase<n>

# æŸ¥çœ‹æŠ¥å‘Š
open reports/phase<n>_latest.html
```

### è¿›åº¦ä»ªè¡¨æ¿
æŠ¥å‘ŠåŒ…å«ï¼š
- æµ‹è¯•ç»“æœï¼ˆå•å…ƒæµ‹è¯•ã€E2Eæµ‹è¯•ï¼‰
- ä»£ç è¦†ç›–ç‡
- æ€§èƒ½è¯„åˆ†
- æˆåŠŸæ ‡å‡†æ£€æŸ¥
- ä¸‹ä¸€æ­¥å»ºè®®

## ğŸ¤– AIè¾…åŠ©å¼€å‘

### 1. ä½¿ç”¨æµ‹è¯•åŠ©æ‰‹
```typescript
import { setupHelpers } from './tests/e2e/helpers';

test('æ¸¸æˆæµç¨‹æµ‹è¯•', async ({ page }) => {
  const { game, rule, npc } = setupHelpers(page);
  
  // åˆ›å»ºæ¸¸æˆ
  const gameId = await game.createGame({
    fearPoints: 1000,
    difficulty: 'normal'
  });
  
  // åˆ›å»ºè§„åˆ™
  await rule.createCustomRule({
    name: 'æµ‹è¯•è§„åˆ™',
    triggerType: 'time'
  });
  
  // éªŒè¯NPCçŠ¶æ€
  await npc.expectNPCStatus('å¼ ä¸‰', {
    isAlive: true,
    fear: 0
  });
});
```

### 2. è‡ªåŠ¨ç”Ÿæˆæµ‹è¯•
```bash
# ä¸ºç»„ä»¶ç”Ÿæˆæµ‹è¯•
node scripts/generate-tests.js components/GameDashboard.vue
```

### 3. ä»£ç å®¡æŸ¥
```bash
# AIä»£ç å®¡æŸ¥
node scripts/code-review.js web/frontend/src/
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
RuleK/
â”œâ”€â”€ web/
â”‚   â”œâ”€â”€ frontend/          # Vue 3å‰ç«¯
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ views/    # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ components/ # å¯å¤ç”¨ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ stores/   # PiniaçŠ¶æ€
â”‚   â”‚   â”‚   â””â”€â”€ router/   # è·¯ç”±é…ç½®
â”‚   â”‚   â””â”€â”€ setup.sh      # åˆå§‹åŒ–è„šæœ¬
â”‚   â””â”€â”€ backend/          # FastAPIåç«¯
â”œâ”€â”€ tests/
â”‚   â””â”€â”€ e2e/             # Playwrightæµ‹è¯•
â”‚       â”œâ”€â”€ phase*.spec.ts # é˜¶æ®µæµ‹è¯•
â”‚       â””â”€â”€ helpers.ts    # æµ‹è¯•åŠ©æ‰‹
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ track-progress.js # è¿›åº¦è¿½è¸ª
â”‚   â””â”€â”€ progress_reporter.py # æŠ¥å‘Šç”Ÿæˆ
â”œâ”€â”€ reports/             # æµ‹è¯•æŠ¥å‘Š
â””â”€â”€ package.json        # é¡¹ç›®é…ç½®
```

## ğŸ¯ æ¯æ—¥å·¥ä½œæµ

### æ—©æ™¨
1. æŸ¥çœ‹æ˜¨æ—¥è¿›åº¦æŠ¥å‘Š
2. ç¡®å®šä»Šæ—¥ç›®æ ‡
3. æ›´æ–°ä»»åŠ¡æ¸…å•

### å¼€å‘ä¸­
1. ç¼–å†™åŠŸèƒ½ä»£ç 
2. ç¼–å†™æµ‹è¯•ä»£ç 
3. è¿è¡Œæµ‹è¯•éªŒè¯

### æ™šä¸Š
1. è¿è¡Œå®Œæ•´æµ‹è¯•
2. ç”Ÿæˆè¿›åº¦æŠ¥å‘Š
3. æäº¤ä»£ç 

```bash
# å®Œæ•´çš„æ¯æ—¥æµç¨‹
npm run test            # è¿è¡Œæµ‹è¯•
npm run track:phase<n>  # æ£€æŸ¥è¿›åº¦
git add .
git commit -m "Phase <n>: å®ŒæˆxxxåŠŸèƒ½"
git push
```

## ğŸ“Š æˆåŠŸæŒ‡æ ‡ç›‘æ§

### å®æ—¶ç›‘æ§
```bash
# å¯åŠ¨ç›‘æ§é¢æ¿
npm run monitor
```

ç›‘æ§å†…å®¹ï¼š
- APIå“åº”æ—¶é—´
- WebSocketè¿æ¥çŠ¶æ€
- å†…å­˜ä½¿ç”¨
- CPUä½¿ç”¨
- é”™è¯¯ç‡

### KPIä»ªè¡¨æ¿
- åŠŸèƒ½å®Œæˆåº¦: X/Y
- æµ‹è¯•é€šè¿‡ç‡: X%
- ä»£ç è¦†ç›–ç‡: X%
- æ€§èƒ½è¯„åˆ†: X/100
- Bugæ•°é‡: X

## ğŸš¨ é—®é¢˜æ’æŸ¥

### å¸¸è§é—®é¢˜

#### 1. ç«¯å£å ç”¨
```bash
# æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹
lsof -i :3000
lsof -i :8000

# ç»“æŸè¿›ç¨‹
kill -9 <PID>
```

#### 2. æµ‹è¯•å¤±è´¥
```bash
# æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
npm run test:debug

# ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š
npm run report
```

#### 3. æ€§èƒ½é—®é¢˜
```bash
# è¿è¡Œæ€§èƒ½åˆ†æ
npm run perf

# æŸ¥çœ‹bundleå¤§å°
npm run analyze
```

## ğŸ‰ å®Œæˆæ ‡å‡†

é¡¹ç›®å®Œæˆæ—¶åº”æ»¡è¶³ï¼š

### åŠŸèƒ½
- [ ] 100% CLIåŠŸèƒ½è¦†ç›–
- [ ] AIå®Œå…¨é›†æˆ
- [ ] å®æ—¶äº¤äº’

### è´¨é‡
- [ ] æµ‹è¯•è¦†ç›–ç‡ > 80%
- [ ] Lighthouse > 90
- [ ] 0å…³é”®bug

### æ€§èƒ½
- [ ] é¦–å±åŠ è½½ < 2s
- [ ] äº¤äº’å“åº” < 100ms
- [ ] AIå“åº” < 2s

### æ–‡æ¡£
- [ ] ç”¨æˆ·æ‰‹å†Œ
- [ ] APIæ–‡æ¡£
- [ ] å¼€å‘æ–‡æ¡£

## ğŸ“š èµ„æºé“¾æ¥

- [Vue 3 æ–‡æ¡£](https://vuejs.org/)
- [Playwright æ–‡æ¡£](https://playwright.dev/)
- [Naive UI ç»„ä»¶](https://www.naiveui.com/)
- [é¡¹ç›®è®¾è®¡æ–‡æ¡£](docs/Web_UI_Plan.md)

## ğŸ’¡ æç¤º

1. **å…ˆæµ‹è¯•åå¼€å‘**: ä½¿ç”¨TDDæ–¹æ³•
2. **å°æ­¥å¿«è·‘**: é¢‘ç¹æäº¤å’Œæµ‹è¯•
3. **åŠæ—¶è¿½è¸ª**: æ¯å¤©ç”Ÿæˆè¿›åº¦æŠ¥å‘Š
4. **ä¿æŒåŒæ­¥**: å‰åç«¯åŒæ­¥å¼€å‘

---

ç¥å¼€å‘é¡ºåˆ©ï¼ğŸš€

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹æ–‡æ¡£æˆ–è¿è¡Œ `npm run help`
